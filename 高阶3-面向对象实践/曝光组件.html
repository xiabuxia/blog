<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>曝光组件</title>
    <style lang="">
        ul {
            list-style: none;
        }
        .container {
            width: 720px;
            margin: 0 auto;
        }
        .container:after{
            content: '';
            display: block;
            clear: both;
        }
        .container li {
            margin: 5px;
            float: left;
        }
        .container img {
            width: 350px;
            height: 320px;
        }
        p {
            float: left;
        }

    </style>
</head>

<body>
    <ul class="container">
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/1.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/2.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/3.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/4.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/5.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/6.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/7.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/8.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/9.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/10.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/11.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/12.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/13.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/14.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/15.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/16.jpg" /></a>
        </li>
        <li>
            <a href="#"><img src="http://kejian.jirengu.com/data/fe/%E8%AF%BE%E4%BB%B6/32-%E6%87%92%E5%8A%A0%E8%BD%BD/code/blank.jpg"
                    data-src="http://cdn.jirengu.com/book.jirengu.com/img/17.jpg" /></a>
        </li>
        <p id="hello">hello</p>
        <p id="world">world</p>
    </ul>
    

    

    <script src="../jquery-3.1.1.min.js"></script>
    <script>

    var Exposure = (function(){

        function exposure($target,callback){
            this.$target = $target;
            this.callback = callback;
            this.bind();
            this.check();
        }



        exposure.prototype.bind = function(){
            var _this = this;
            $(window).on('scroll',function(){
               _this.check();
            })

        };
        exposure.prototype.check = function(){
            if(this.isShow()){
                this.callback(this.$target);
            }
        }
        exposure.prototype.isShow = function(){
            if(this.$target.hasClass('load')) return;
            var $winHeight = $(window).height(),
                $scrollTop = $(window).scrollTop(),
                $offsetTop = this.$target.offset().top,
                $nodeHeight = this.$target.height();
            if($winHeight+$scrollTop > $offsetTop && $scrollTop < $offsetTop+$nodeHeight){
                this.$target.addClass('load')
                return true;
            }else {
                return false;
            }
        };

       return {
            init: function($target,callback){
                 $.each($target,function(index,item){
                    new exposure($(item),callback)
                })
            }
        }
    })();



        Exposure.init($('img'),function($node){
               showImgs($node)
        })

        Exposure.init($('#hello'),function($node){
               $node.html($node.html()+$('#world').html())
        })



        function showImgs($node){
            var imgUrl = $node.attr('data-src');
                $node.attr('src',imgUrl)
        }

        

    </script>
</body>

</html>