<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	
	<div class="box">
		<div class="city"></div>
		<div class="weather"></div>
		<button class="btn">点击</button>
	</div>
<script type="text/javascript">
	var city = document.querySelector('.city');
	var btn = document.querySelector('.btn');
	var weather = document.querySelector('.weather');
	var box = document.querySelector('.box');
	var body = document.querySelector('body')

	btn.addEventListener('click', function(e){
		var oScript=document.createElement('script');
		oScript.src='http://jirenguapi.applinzi.com/weather.php?callback=getCity'
		document.head.appendChild(oScript);
		document.head.removeChild(oScript);
	})
	box.addEventListener('click',function(e){
		e.stopPropagation()
	})
	window.addEventListener('click',function(e){
			city.innerText = '';
			weather.innerText = '';
			e.stopPropagation();


	})

	function getCity(obj){
		if(obj.status === 'success'){
			city.innerHTML=obj.results[0].currentCity;
			weather.innerText = obj.date;
		}else{
			city.innerHTML = '出错了'
	}}
</script>

</body>
</html>